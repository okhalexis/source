--// Loader WindUI
local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

--// Serviços
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")

--// Variáveis Locais do Jogador
local LocalPlayer = Players.LocalPlayer
local Camera = Workspace.CurrentCamera

--// Ajustes da Lib
WindUI:SetNotificationLower(true)
WindUI:SetFont("rbxassetid://0") 

--// Localization
WindUI:Localization({
    Enabled = true,
    Prefix = "loc:",
    DefaultLanguage = "pt",
    Translations = {
        ["pt"] = {
            ["HUB_TITLE"]    = "Tsunami Brainrot Hub",
            ["HUB_AUTHOR"]   = "by You",
            ["TAB_PLAYER"]   = "Jogador",
            ["TAB_WORLD"]    = "Mundo",
            ["TAB_SETTINGS"] = "Configurações",
        },
        ["en"] = {
            ["HUB_TITLE"]    = "Tsunami Brainrot Hub",
            ["HUB_AUTHOR"]   = "by You",
            ["TAB_PLAYER"]   = "Player",
            ["TAB_WORLD"]    = "World",
            ["TAB_SETTINGS"] = "Settings",
        },
    }
})

--// Tema Nebula Customizado
WindUI:AddTheme({
    Name = "Nebula",
    Accent = Color3.fromHex("#18181b"),
    Background = Color3.fromHex("#050509"),
    BackgroundTransparency = 0,
    Outline = Color3.fromHex("#FFFFFF"),
    Text = Color3.fromHex("#FFFFFF"),
    Placeholder = Color3.fromHex("#7a7a7a"),
    Button = Color3.fromHex("#2b2b35"),
    Icon = Color3.fromHex("#a1a1aa"),
    Hover = Color3.fromHex("#FFFFFF"),
    WindowBackground = Color3.fromHex("#050509"),
    WindowShadow = Color3.fromHex("#000000"),
    DialogBackground = Color3.fromHex("#050509"),
    DialogBackgroundTransparency = 0,
    DialogTitle = Color3.fromHex("#FFFFFF"),
    DialogContent = Color3.fromHex("#FFFFFF"),
    DialogIcon = Color3.fromHex("#a1a1aa"),
    WindowTopbarButtonIcon = Color3.fromHex("a1a1aa"),
    WindowTopbarTitle = Color3.fromHex("FFFFFF"),
    WindowTopbarAuthor = Color3.fromHex("FFFFFF"),
    WindowTopbarIcon = Color3.fromHex("FFFFFF"),
    TabBackground = Color3.fromHex("#101019"),
    TabTitle = Color3.fromHex("#FFFFFF"),
    TabIcon = Color3.fromHex("a1a1aa"),
    ElementBackground = Color3.fromHex("#101019"),
    ElementTitle = Color3.fromHex("#FFFFFF"),
    ElementDesc = Color3.fromHex("#b0b0b0"),
    ElementIcon = Color3.fromHex("a1a1aa"),
    PopupBackground = Color3.fromHex("#050509"),
    PopupBackgroundTransparency = 0,
    PopupTitle = Color3.fromHex("#FFFFFF"),
    PopupContent = Color3.fromHex("#FFFFFF"),
    PopupIcon = Color3.fromHex("a1a1aa"),
    Toggle = Color3.fromHex("#52525b"),
    ToggleBar = Color3.fromHex("#FFFFFF"),
    Checkbox = Color3.fromHex("#52525b"),
    CheckboxIcon = Color3.fromHex("#FFFFFF"),
    Slider = Color3.fromHex("#52525b"),
    SliderThumb = Color3.fromHex("#FFFFFF"),
})
WindUI:SetTheme("Nebula")

--// ==========================================
--// LÓGICA CORE
--// ==========================================

local Core = {
    Speed = { Enabled = false, Value = 22, Connection = nil },
    Jump = { Enabled = false, Value = 50, Connection = nil },
    Fly = { Enabled = false, Speed = 50, Connection = nil },
    NoClip = { Enabled = false, Connection = nil }
}

local function getChar() return LocalPlayer.Character end
local function getHum() return getChar() and getChar():FindFirstChildOfClass("Humanoid") end
local function getRoot() return getChar() and getChar():FindFirstChild("HumanoidRootPart") end

-- SISTEMA DE SPEED BYPASS (CFrame Delta)
local function UpdateSpeed()
    if Core.Speed.Connection then Core.Speed.Connection:Disconnect() end
    Core.Speed.Connection = RunService.Heartbeat:Connect(function(dt)
        if Core.Speed.Enabled then
            local hum = getHum()
            local root = getRoot()
            if hum and root and hum.MoveDirection.Magnitude > 0 then
                -- O bypass funciona mantendo o WalkSpeed real baixo e somando CFrame
                local extraSpeed = Core.Speed.Value - 16
                root.CFrame = root.CFrame + (hum.MoveDirection * (extraSpeed * dt))
            end
        end
    end)
end

-- SISTEMA DE JUMP
local function UpdateJump()
    if Core.Jump.Connection then Core.Jump.Connection:Disconnect() end
    Core.Jump.Connection = RunService.Heartbeat:Connect(function()
        if Core.Jump.Enabled then
            local hum = getHum()
            if hum then
                hum.UseJumpPower = true
                hum.JumpPower = Core.Jump.Value
            end
        end
    end)
end

-- SISTEMA DE FLY (WASD + Space/Ctrl)
local FlyKeys = {W=false, A=false, S=false, D=false, Space=false, Ctrl=false}
UserInputService.InputBegan:Connect(function(i, g) if not g then FlyKeys[i.KeyCode.Name] = true end end)
UserInputService.InputEnded:Connect(function(i) FlyKeys[i.KeyCode.Name] = false end)

local function ToggleFly(state)
    Core.Fly.Enabled = state
    if Core.Fly.Connection then Core.Fly.Connection:Disconnect() end
    
    if state then
        Core.Fly.Connection = RunService.RenderStepped:Connect(function(dt)
            local root = getRoot()
            local hum = getHum()
            if root and hum then
                hum.PlatformStand = true
                local vel = Vector3.zero
                if FlyKeys.W then vel = vel + (Camera.CFrame.LookVector * Core.Fly.Speed) end
                if FlyKeys.S then vel = vel - (Camera.CFrame.LookVector * Core.Fly.Speed) end
                if FlyKeys.A then vel = vel - (Camera.CFrame.RightVector * Core.Fly.Speed) end
                if FlyKeys.D then vel = vel + (Camera.CFrame.RightVector * Core.Fly.Speed) end
                if FlyKeys.Space then vel = vel + (Vector3.new(0,1,0) * Core.Fly.Speed) end
                if FlyKeys.LeftControl then vel = vel - (Vector3.new(0,1,0) * Core.Fly.Speed) end
                root.Velocity = Vector3.zero
                root.CFrame = root.CFrame + (vel * dt)
            end
        end)
    else
        local hum = getHum()
        if hum then hum.PlatformStand = false end
    end
end

-- SISTEMA DE NOCLIP
local function ToggleNoClip(state)
    Core.NoClip.Enabled = state
    if Core.NoClip.Connection then Core.NoClip.Connection:Disconnect() end
    if state then
        Core.NoClip.Connection = RunService.Stepped:Connect(function()
            local char = getChar()
            if char then
                for _, v in pairs(char:GetDescendants()) do
                    if v:IsA("BasePart") then v.CanCollide = false end
                end
            end
        end)
    end
end

--// ==========================================
--// INTERFACE
--// ==========================================

local Window = WindUI:CreateWindow({
    Title      = "loc:HUB_TITLE",
    Icon       = "waves",
    Author     = "loc:HUB_AUTHOR",
    Folder     = "TsunamiHub",
    Size       = UDim2.fromOffset(550, 420),
    Transparent= true,
    Theme      = "Nebula",
})

local Tabs = {
    Player   = Window:Tab({ Title = "loc:TAB_PLAYER", Icon = "user" }),
    World    = Window:Tab({ Title = "loc:TAB_WORLD",  Icon = "globe" }),
    Settings = Window:Tab({ Title = "loc:TAB_SETTINGS", Icon = "settings" }),
}

-- SEÇÃO: MOVIMENTAÇÃO (SPEED)
local SpeedSection = Tabs.Player:Section({ Title = "Movimentação", Box = true })

SpeedSection:Toggle({
    Title = "Speed Bypass",
    Desc  = "Passa pelo Anti-Cheat (Mantém Speed 16 visualmente)",
    Value = false,
    Callback = function(state)
        Core.Speed.Enabled = state
        UpdateSpeed()
    end
})

SpeedSection:Slider({
    Title = "Velocidade",
    Value = { Min = 22, Max = 1000, Default = 22 },
    Callback = function(v) Core.Speed.Value = v end
})

-- SEÇÃO: PULO
local JumpSection = Tabs.Player:Section({ Title = "Pulo", Box = true })

JumpSection:Toggle({
    Title = "Custom Jump",
    Value = false,
    Callback = function(state)
        Core.Jump.Enabled = state
        UpdateJump()
    end
})

JumpSection:Slider({
    Title = "Altura do Pulo",
    Value = { Min = 50, Max = 500, Default = 50 },
    Callback = function(v) Core.Jump.Value = v end
})

-- SEÇÃO: ABILIDADES
local SkillSection = Tabs.Player:Section({ Title = "Abilidades Especiais", Box = true })

SkillSection:Toggle({
    Title = "Fly (Voo)",
    Callback = function(state) ToggleFly(state) end
})

SkillSection:Toggle({
    Title = "NoClip",
    Callback = function(state) ToggleNoClip(state) end
})

-- SEÇÃO: CONFIGURAÇÕES
local SettingsSection = Tabs.Settings:Section({ Title = "Configuração do Menu", Box = true })

SettingsSection:Keybind({
    Title = "Fechar/Abrir Menu",
    Value = "RightShift",
    Callback = function(key) Window:SetToggleKey(Enum.KeyCode[key]) end
})

SettingsSection:Button({
    Title = "Destruir Script",
    Color = Color3.fromRGB(255, 70, 70),
    Callback = function()
        if Core.Speed.Connection then Core.Speed.Connection:Disconnect() end
        if Core.Jump.Connection then Core.Jump.Connection:Disconnect() end
        if Core.Fly.Connection then Core.Fly.Connection:Disconnect() end
        if Core.NoClip.Connection then Core.NoClip.Connection:Disconnect() end
        local hum = getHum()
        if hum then hum.PlatformStand = false; hum.WalkSpeed = 16 end
        Window:Close()
    end
})

WindUI:Notify({
    Title = "Hub Carregado!",
    Content = "Use com cuidado. Velocidades acima de 100 podem causar instabilidade.",
    Duration = 5
})
